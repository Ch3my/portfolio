import"./ViewTransitions.astro_astro_type_script_index_0_lang.D9HCc-z0.js";const S=document.getElementById("playlist-songs"),l=document.getElementById("play"),y=document.getElementById("pause"),f=document.getElementById("next"),E=document.getElementById("previous"),x=document.getElementById("shuffle"),B=[{id:0,title:"Vocals",artist:"Demucs",duration:"00:31",src:"/audio/demucs-sample/vocals.mp3"},{id:1,title:"Drums",artist:"Demucs",duration:"00:31",src:"/audio/demucs-sample/drums.mp3"},{id:2,title:"Bass",artist:"Demucs",duration:"00:31",src:"/audio/demucs-sample/bass.mp3"}],o=new Audio;let t={songs:[...B],currentSong:null,songCurrentTime:0};const r=n=>{const e=t.songs.find(s=>s.id===n);o.src=e.src,o.title=e.title,t.currentSong===null||t.currentSong.id!==e.id?o.currentTime=0:o.currentTime=t.songCurrentTime,t.currentSong=e,l.classList.add("playing"),d(),u(),i(),o.play()},c=()=>{t.songCurrentTime=o.currentTime,l.classList.remove("playing"),o.pause()},d=()=>{const n=document.querySelectorAll(".playlist-song"),e=document.getElementById(`song-${t?.currentSong?.id}`);n.forEach(s=>{s.removeAttribute("aria-current")}),e&&e.setAttribute("aria-current","true")},m=n=>{const e=n.map(s=>`
                <li id="song-${s.id}" class="playlist-song">
                <button class="playlist-song-info" onclick="playSong(${s.id})">
                    <span class="playlist-song-title">${s.title}</span>
                    <span>-</span>
                    <span class="playlist-song-artist">${s.artist}</span>
                </button>
                </li>
                `).join("");S.innerHTML=e},u=()=>{const n=document.getElementById("player-song-title"),e=document.getElementById("player-song-artist"),s=t?.currentSong?.title,a=t?.currentSong?.artist;n&&(n.textContent=s||""),e&&(e.textContent=a||"")},i=()=>{const n=t?.currentSong||t?.songs[0],e=document.getElementById("play");e&&e.setAttribute("aria-label",n?.title?`Play ${n.title}`:"Play")},g=()=>{const n=t?.currentSong;return n?(console.log(t?.songs.indexOf(n)),t?.songs.indexOf(n)):-1},p=()=>{if(t?.currentSong===null)r(t?.songs[0].id);else{const n=g();if(n!==-1){const e=t?.songs[n+1];e&&r(e.id)}}},I=()=>{if(console.log(t?.currentSong),t?.currentSong===null)return;const n=g();if(console.log("currentSongIndex "+n),n!==-1){const e=t?.songs[n-1];e&&r(e.id)}},v=()=>{t&&(t.songs.sort(()=>Math.random()-.5),t.currentSong=null,t.songCurrentTime=0,m(t.songs),c(),u(),i())};y.addEventListener("click",c);f.addEventListener("click",p);E.addEventListener("click",I);x.addEventListener("click",v);l.addEventListener("click",()=>{t?.currentSong===null?r(t?.songs[0]?.id||0):r(t?.currentSong?.id||0)});o.addEventListener("ended",()=>{const n=g();t?.songs[n+1]!==void 0?p():(t.currentSong=null,t.songCurrentTime=0,c(),u(),d(),i())});const T=()=>t?.songs.slice().sort((e,s)=>e.title<s.title?-1:e.title>s.title?1:0)||[];m(T());i();
